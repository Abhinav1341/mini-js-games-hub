.modal.champion{animation:championPop 1.2s cubic-bezier(.2,1.5,.4,1)}
@keyframes championPop{
	0%{transform:scale(.7) rotate(-8deg); box-shadow:0 0 0 0 #ffd70044;}
	60%{transform:scale(1.08) rotate(6deg); box-shadow:0 0 0 24px #ffd70044;}
	80%{transform:scale(.98) rotate(-2deg); box-shadow:0 0 0 8px #ffd70044;}
	100%{transform:scale(1) rotate(0deg); box-shadow:0 0 0 0 #ffd70044;}
}
:root{
	--bg1:#0f1023; --bg2:#1a1b3a; --card:#14162a99; --cardBorder:#2a2d55;
	--text:#e7e9ff; --muted:#a8b0ff; --accent:#7b5cff; --accent2:#21d4fd; --good:#2de370; --bad:#ff4d6d;
	--tile:#1f2244; --tileHover:#292c58; --shadow:0 10px 30px rgba(0,0,0,.35);
}
html[data-theme="light"]{
	--bg1:#f2f6ff; --bg2:#e7ecff; --card:#ffffffcc; --cardBorder:#d7dcff;
	--text:#15172a; --muted:#4c58a6; --accent:#5b2cff; --accent2:#0ea5e9; --good:#16a34a; --bad:#dc2626;
	--tile:#eef1ff; --tileHover:#e2e7ff; --shadow:0 10px 25px rgba(0,0,0,.12);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
	margin:0; font-family:'Outfit',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
	color:var(--text); background:linear-gradient(135deg,var(--bg1),var(--bg2));
	overflow-x:hidden;
}

#bg{position:fixed; inset:0; pointer-events:none;
	background:
		radial-gradient(1200px 800px at 10% 10%, #7b5cff10, transparent 60%),
		radial-gradient(1000px 700px at 90% 20%, #21d4fd10, transparent 60%),
		radial-gradient(1400px 900px at 30% 90%, #ff5ca810, transparent 60%);
	filter:saturate(120%);
}

.container{max-width:1100px; margin:0 auto; padding:24px; position:relative}
.topbar{display:flex; align-items:center; justify-content:space-between; gap:16px; margin-bottom:10px}
.title{margin:0; font-weight:800; letter-spacing:.5px; display:flex; align-items:center; gap:10px; transition:.3s}
.title:hover{transform:scale(1.02); filter:drop-shadow(0 4px 12px #7b5cff44)}
.title .emoji{filter:drop-shadow(0 2px 6px #0006); transition:.3s; display:inline-block}
.title:hover .emoji{transform:rotate(10deg) scale(1.1); filter:drop-shadow(0 4px 10px #0008)}
.controls{display:flex; gap:10px; flex-wrap:wrap}

.btn{border:1px solid var(--cardBorder); background:linear-gradient(180deg, #ffffff12, #0000000e);
	color:var(--text); padding:10px 14px; border-radius:12px; cursor:pointer; transition:.2s transform, .2s background, .2s border, .2s box-shadow;
	box-shadow:var(--shadow); backdrop-filter:blur(10px); position:relative; overflow:hidden;
}
.btn::before{content:''; position:absolute; inset:0; background:linear-gradient(135deg, #ffffff18, transparent); opacity:0; transition:.3s}
.btn:hover{transform:translateY(-2px); background:linear-gradient(180deg, #ffffff22, #00000012); box-shadow:0 12px 35px rgba(0,0,0,.4); border-color:var(--accent)}
.btn:hover::before{opacity:1}
.btn:active{transform:translateY(0) scale(.96)}
.btn.primary{background:linear-gradient(135deg,var(--accent2),var(--accent)); color:#fff; border-color:transparent}
.btn.primary:hover{filter:brightness(1.12); box-shadow:0 12px 40px rgba(123,92,255,.35)}
.btn.pill{border-radius:999px}
.btn.lg{padding:12px 18px; font-weight:600}

.hud{display:grid; grid-template-columns:repeat(4,1fr); gap:14px; margin:14px 0}
.stat{background:var(--card); border:1px solid var(--cardBorder); padding:12px 14px; border-radius:14px; box-shadow:var(--shadow); transition:.3s; cursor:default}
.stat:hover{transform:translateY(-3px); box-shadow:0 14px 35px rgba(0,0,0,.3); border-color:var(--accent); background:linear-gradient(135deg, var(--card), #ffffff08)}
.stat .label{display:block; font-size:.8rem; color:var(--muted); transition:.3s}
.stat:hover .label{color:var(--accent2)}
.stat .value{font-size:1.45rem; font-weight:700; transition:.3s; display:inline-block}
.stat:hover .value{transform:scale(1.08); color:var(--accent)}

.hearts{display:flex; gap:6px; justify-content:center; font-size:1.4rem; margin-top:4px}
.heart{display:inline-block; transition:.3s; filter:drop-shadow(0 2px 4px #0004)}
.heart.lost{animation:heartBreak .5s ease; filter:grayscale(1) brightness(.7)}
@keyframes heartBreak{0%{transform:scale(1)} 50%{transform:scale(1.3) rotate(15deg)} 100%{transform:scale(1)}}

.combo-display{position:fixed; top:50%; right:30px; transform:translateY(-50%); text-align:center; pointer-events:none; z-index:900; opacity:0; transition:.3s; background:rgba(0,0,0,.3); backdrop-filter:blur(8px); border:2px solid var(--accent); border-radius:16px; padding:12px 24px; box-shadow:0 8px 24px rgba(0,0,0,.3)}
.combo-display.show{opacity:1; animation:comboFloat 0.6s ease}
.combo-text{font-size:1.2rem; font-weight:700; color:var(--accent2); text-shadow:0 2px 8px #000; letter-spacing:2px}
.combo-value{font-size:3rem; font-weight:900; background:linear-gradient(135deg, #ff6d4d, #ffd700, #ff6d4d); -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent; filter:drop-shadow(0 4px 12px #ff6d4d88); animation:pulse 1s infinite}
@keyframes comboFloat{0%{transform:translateY(-50%) translateX(40px) scale(0.5); opacity:0} 50%{transform:translateY(-50%) translateX(-5px) scale(1.2)} 100%{transform:translateY(-50%) scale(1); opacity:1}}
@keyframes pulse{0%,100%{transform:scale(1)} 50%{transform:scale(1.1)}}

.timer{display:grid; gap:8px; margin:10px 0 18px}
.timer-track{width:100%; height:14px; border-radius:999px; background:linear-gradient(0deg,#00000022,#ffffff0e); border:1px solid var(--cardBorder); overflow:hidden; box-shadow:inset 0 2px 8px #00000033; transition:.3s}
.timer-track:hover{transform:scaleY(1.15); box-shadow:inset 0 2px 12px #00000044}
.timer-fill{height:100%; width:100%; background:linear-gradient(90deg,#2de370,#ffcf3c,#ff6d4d);
	transition:width .1s linear; transform-origin:left; position:relative}
.timer-fill::after{content:''; position:absolute; inset:0; background:linear-gradient(90deg, transparent, #ffffff44, transparent); animation:shimmer 2s infinite}
@keyframes shimmer{0%,100%{transform:translateX(-100%)} 50%{transform:translateX(100%)}}
.timer-text{font-variant-numeric:tabular-nums; text-align:right; color:var(--muted); transition:.3s}
.timer-text:hover{color:var(--accent2); transform:scale(1.05)}

.grid{display:grid; gap:10px; place-items:center; padding:16px; border-radius:18px; background:var(--card); border:1px solid var(--cardBorder); box-shadow:var(--shadow);
	min-height:320px; transition:.25s}
.grid:hover{box-shadow:0 15px 40px rgba(0,0,0,.4); border-color:var(--accent2)}
.grid.enter{animation:fadeIn .35s ease both}

.tile{width:72px; aspect-ratio:1; border-radius:12px; background:var(--tile); border:1px solid #ffffff22; display:grid; place-items:center; font-size:2rem; user-select:none; cursor:pointer; position:relative;
	transition:.2s transform, .2s box-shadow, .15s filter, .2s border-color}
.tile::before{content:''; position:absolute; inset:-2px; border-radius:12px; background:linear-gradient(135deg, var(--accent2), var(--accent)); opacity:0; transition:.3s; z-index:-1; filter:blur(8px)}
.tile:hover{transform:translateY(-4px) scale(1.05); box-shadow:0 12px 25px #0004; background:var(--tileHover); border-color:var(--accent2)}
.tile:hover::before{opacity:.3}
.tile:active{transform:translateY(0) scale(.96)}
.tile.correct{outline:2px solid var(--good); box-shadow:0 0 0 6px #2de37022; animation:correctPulse .4s ease}
.tile.wrong{outline:2px solid var(--bad); box-shadow:0 0 0 6px #ff4d6d22; animation:wrongShake .5s ease}
.tile.fade{animation:pop .28s ease}

/* Compact/dense modes for large grids */
.grid.compact{gap:8px}
.grid.compact .tile{width:56px}
.grid.dense{gap:6px}
.grid.dense .tile{width:42px}

@keyframes fadeIn{from{opacity:0; transform:translateY(10px)} to{opacity:1; transform:none}}
@keyframes pop{0%{transform:scale(.9); opacity:.6} 60%{transform:scale(1.06); opacity:1} 100%{transform:scale(1)}}
@keyframes correctPulse{0%,100%{transform:scale(1)} 50%{transform:scale(1.12)}}
@keyframes wrongShake{0%,100%{transform:translateX(0)} 20%,60%{transform:translateX(-8px)} 40%,80%{transform:translateX(8px)}}

.bottombar{display:flex; justify-content:center; gap:14px; margin-top:18px}

.toast{position:fixed; top:18px; left:50%; transform:translateX(-50%); background:#111a; color:#fff; padding:10px 14px; border-radius:999px; border:1px solid #ffffff33; opacity:0; pointer-events:none; transition:.25s; backdrop-filter:blur(10px); box-shadow:0 8px 20px #0006}
.toast.show{opacity:1; transform:translateX(-50%) translateY(6px); animation:toastBounce .4s ease}
@keyframes toastBounce{0%{transform:translateX(-50%) translateY(-20px)} 60%{transform:translateX(-50%) translateY(8px)} 100%{transform:translateX(-50%) translateY(6px)}}

.overlay{position:fixed; inset:0; background:linear-gradient(0deg,#0007,#0008); display:grid; place-items:center; z-index:20; backdrop-filter:blur(4px)}
.overlay.hidden{display:none}
.modal{width:min(560px,92vw); background:var(--card); border:1px solid var(--cardBorder); border-radius:18px; padding:22px; box-shadow:var(--shadow); text-align:center; transition:.3s}
.modal:hover{transform:scale(1.02); box-shadow:0 20px 50px rgba(0,0,0,.5); border-color:var(--accent)}
.modal h2{margin-top:0; transition:.3s; color:var(--text)}
.modal h2 .gradient-text{background:linear-gradient(135deg,var(--accent2),var(--accent)); -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent}
.modal:hover h2{filter:brightness(1.2)}

.share-modal{max-width:480px}
.share-modal p{color:var(--muted); margin:8px 0 20px}
.share-buttons{display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-bottom:8px}
.share-btn{display:flex; flex-direction:column; align-items:center; gap:8px; padding:16px 12px; font-size:.9rem}
.share-btn .share-icon{font-size:2rem; filter:drop-shadow(0 2px 4px #0004)}
.share-btn.whatsapp:hover{background:linear-gradient(135deg, #25D366, #128C7E); color:#fff; border-color:transparent}
.share-btn.telegram:hover{background:linear-gradient(135deg, #0088cc, #229ED9); color:#fff; border-color:transparent}
.share-btn.x:hover{background:linear-gradient(135deg, #000000, #14171A); color:#fff; border-color:transparent}
.share-btn.instagram:hover{background:linear-gradient(135deg, #833AB4, #FD1D1D, #FCB045); color:#fff; border-color:transparent}

.overlay-stats{display:flex; justify-content:center; gap:24px; color:var(--muted); margin:16px 0; transition:.3s}
.overlay-stats div{transition:.3s; cursor:default}
.overlay-stats div:hover{color:var(--accent2); transform:scale(1.1)}
.overlay-actions{display:flex; justify-content:center; gap:12px}

.fx-layer{pointer-events:none; position:fixed; inset:0; overflow:hidden; z-index:15}
.confetti{position:absolute; width:10px; height:14px; border-radius:2px; opacity:.9; transform:translate(-50%,-50%); animation:fall var(--dur) linear forwards; box-shadow:0 2px 8px #0006}
@keyframes fall{to{transform:translate(var(--tx,0), 110vh) rotate(var(--rot,360deg)); opacity:.2}}

/* Responsive */
@media (max-width:720px){
	.tile{width:56px}
	.hud{grid-template-columns:1fr 1fr; gap:12px}
	.hud .stat:nth-child(4){grid-column:span 2}
}